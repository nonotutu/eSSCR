:ruby
  c_id = params[:customer_id]
  if c_id.present?
    cust_data     = Customer.find(t_id).data
  end

=# formulaire mis en page
%table.formulaire
  %tr
    %th
      %i
        Customer :
    %td{ :colspan => '5' }
      %form{ :method => :get }
        %select{ :name => :customer_id }
          %option{ :value => '' }
          = Customer.each do |cust|
            - selected = ( ( c_id.present? && cust.id == params[:customer_id]) ? 'selected' : nil )
            %option{ :value => cust.id, :selected => selected }
              = cust.lines.first
        %input{ :type => :hidden, :name => 'mode', :value => 'edit' }
        %input{ :type => :submit, :value => 'Use' }

%table.formulaire
  = simple_form_for ([@invoice, @nositem ||= Nositem.new]) do |f|
    %tr
      %th
        Name :
      %td{ :colspan => '5' }
        = f.input :name, :label => false
    %tr
      %th
        Quantity :
      %td
        = f.input :qty, :label => false, :input_html => {:size => 2} 
      %th
        Kind :
      %td
        = f.input :kind,
            :as => :radio,
            :collection => [['â‚¬', 1], ['%', 2]],
            :label_method => :first,
            :value_method => :last,
            :label => false
      %th
        Price :
      %td
        = f.input :price, :label => false, :input_html => {:size => 2} 
    %tr
      %td
      %td{ :colspan => '5', :align => :right }
        = f.button :submit    